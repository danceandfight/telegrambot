# Телаграм бот для уведомлений о проверке заданий DVMN

Телеграм бот, который пришлет уведомление о проверке любого задания с курса [DVMN.org](DVMN.org) и вам не придется больше обновлять страничку в томительном ожидании.

## Как установить

**Важно!** Предварительно должен быть установлен python версии не выше 3.9.x.

Скачайте код:
```sh
git clone git@github.com:danceandfight/telegrambot.git
```

Перейдите в каталог проекта:
```sh
cd telegrambot
```
Проверьте, что `python` установлен и корректно настроен. Запустите его в командной строке:
```sh
python --version
```

Возможно, вместо команды `python` здесь и в остальных инструкциях этого README придётся использовать `python3`. Зависит это от операционной системы и от того, установлен ли у вас Python старой второй версии. 

В каталоге проекта создайте виртуальное окружение:
```sh
python -m venv venv
```
Активируйте его. На разных операционных системах это делается разными командами:

- Windows: `.\venv\Scripts\activate`
- MacOS/Linux: `source venv/bin/activate`

Установите зависимости в виртуальное окружение:
```sh
pip install -r requirements.txt
```

Зарегестрируйте двух новых ботов с помощью `@BotFather` в телеграме: первый будет присылать уведомления о проверках, а второй сообщать, если что-то пойдет не так. Вам потребуются их токены, которые выдаст `@BotFather` после регистрации.

Найдите свой токен devman в [профиле](https://dvmn.org/api/docs/):

Создайте файл `.env` в каталоге `telegrambot/` и положите туда код такого вида, заменив токены на свои:
```sh
TELEGRAM_BOT_TOKEN='123456789:SFefseEGhyfJyj4jKUutkuASFhrtjhyJ42g'
TELEGRAM_BOT_LOGGER_TOKEN='987654321:DSGJHEQIhvhu2g4hfsduf21jif4fi3jinfk'
DVMN_TOKEN=46f539vfsjngi4359860ewgnirgnri39341vmor1
```

Запустите бота:

```sh
python main.py
```

## Как установить бота на heroku

- После регистрации на [heroku.com](heroku.com), создайте новое приложение:`Create new app `
- Подключите GitHub во вкладке `Deployment Method` и активируйте  `Automatic Deploys`, тогда при каждом обновлении репозитория на GitHub код будет автоматически обновлятся. С помощью `Manual Deploy/Deploy Branch` можно запушить код вручную.
- Добавьте переменные окружения из `.env` во вкладке `Settings/Config Vars`
- Во вкладке Resources будет строка `bot python3 main.py` - нужно активировать запуск бота переключателем

## Как пользоваться

Начните диалоги с двумя вашими ботами, использовав команду `/start` в диалоге. Для того, чтобы проверить работоспособность бота, отправьте любую работу на проверку и затем верните ее. Бот должен прислать уведовление с указанием название урока.

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).